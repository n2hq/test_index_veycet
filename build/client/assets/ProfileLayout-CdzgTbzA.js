import{j as s}from"./jsx-runtime-0DLF9kdB.js";import{r as t}from"./components-DPfHZ1Ve.js";import{L as h}from"./AccountUserImage-DUVY_Zmu.js";import{o as d,p as j,q as N}from"./lib-B83UiCcG.js";import{H as b}from"./HomeNav-Bd3MTT6k.js";import{u as y}from"./AuthContext-DKUMkAUy.js";import{M as E}from"./MainNav-C35PW04j.js";const B=({children:u})=>{const[a,r]=t.useState(!0),[i,x]=t.useState(null),[c,m]=t.useState(!0),[f,p]=t.useState(null),e=y();if(!e)return null;t.useEffect(()=>{e.user===null&&(window.location.href="/web/signin")},[e]);const[g,v]=t.useState(!0),w=()=>{r(a===!1)};return t.useEffect(()=>{var o,n,l;((o=e==null?void 0:e.user)==null?void 0:o.guid)!==null&&((n=e==null?void 0:e.user)==null?void 0:n.guid)!==void 0&&((l=e==null?void 0:e.user)==null?void 0:l.guid)!==""?v(!1):window.location.href="/web/signin"},[e==null?void 0:e.user]),t.useEffect(()=>{const o=async n=>{const l=await N(n||"");x(l)};e!=null&&e.user&&o(e==null?void 0:e.user.guid)},[e==null?void 0:e.user]),t.useEffect(()=>{const o=localStorage.getItem("authTokens");(o==null||o==="")&&(window.location.href="/web/signin")},[]),t.useEffect(()=>{i&&m(!!(i!=null&&i.active))},[i]),t.useEffect(()=>{c===!1&&p("You are currently deactivated. Some operations like creating new business cannot be performed. Activate your profile to continue.")},[c]),g?s.jsx("div",{className:"flex justify-center items-center h-screen",children:s.jsx("div",{className:"text-lg",children:"Loading..."})}):s.jsxs("div",{className:"h-screen flex flex-col relative",children:[s.jsx("div",{className:`h-[${d.NAVBAR_HEIGHT}px] md:h-[0px]`}),s.jsx(E,{}),s.jsx("div",{className:"md:hidden",children:s.jsx(b,{})}),s.jsx("button",{onClick:w,className:`text-xl text-white bg-gray-700 p-2 
                rounded-full hover:bg-gray-700 shadow-lg top-[72px]
                ${a?"left-[295px]":"left-[15px]"}
                focus:outline-none fixed z-50 top-[60px] 
                transition-all duration-1000 ease-in-out
                hidden lg:block`,children:s.jsx(j,{className:`${a?"rotate-0 transition-all duration-1000 ease-in-out":"rotate-90 transition-all duration-1000 ease-in-out"}`})}),s.jsxs("div",{className:`flex flex-1 md:mt-[${d.NAVBAR_HEIGHT}px] h-full
                overflow-hidden`,children:[s.jsxs("aside",{className:`bg-gray-50 text-gray-900 
                        h-full overflow-y-auto transition-all z-30
                        duration-1000 ease-in-out border-r shadow-md
                        hidden lg:block 
                        ${a?"w-[350px] min-w-[350px]":"w-0 min-w-0 overflow-hidden"}`,children:[s.jsx("div",{className:"mt-[20px]"}),s.jsx(h,{userProfile:i}),s.jsx("div",{className:"h-[20px]"})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto bg-gray-50 pb-6 px-[0px] relative",children:[f&&s.jsx("div",{className:"max-w-[100%] mx-auto w-full bg-blue-500 px-3 pt-[10px] pb-[15px] text-white text-center",children:f}),s.jsx("div",{className:"max-w-[100%] mx-auto w-full  ",children:u})]})]})]})};export{B as P};
