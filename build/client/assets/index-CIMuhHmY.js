import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{r as l,L as P,d as g,b as S}from"./components-DPfHZ1Ve.js";import{A as _}from"./AccountLayout-D_sH2dba.js";import{u as k}from"./AuthContext-DKUMkAUy.js";import{N as L,y as $,aD as E,O as I,au as A,q as C,aE as M}from"./lib-B83UiCcG.js";import{L as q}from"./LoadingMessage-CO2lhh43.js";import"./AccountUserImage-DUVY_Zmu.js";import"./HomeNav-Bd3MTT6k.js";import"./MainNav-C35PW04j.js";import"./index-BVQZtB2M.js";const B=({listing:t,index:r})=>{const[c,m]=l.useState("/images/placeholder-icon.webp"),[x,i]=l.useState("");function a(u){return u%2!==0}return l.useEffect(()=>{if(t&&(t==null?void 0:t.image_url)!==null){let u=L.IMG_BASE_URL+(t==null?void 0:t.image_url);i(u)}else i(c)},[t]),e.jsx("div",{className:" cursor-pointer my-0",children:e.jsxs("div",{className:`flex rounded  gap-x-2 py-2 px-1
             hover:bg-blue-50  
             ${a(r),""}
                `,children:[e.jsx("div",{className:`relative min-w-[46px] w-[46px] h-[45px]
                    rounded-md overflow-hidden border bg-transparent bg-cover bg-center`,style:{backgroundImage:`url(${c})`},children:x!==null&&e.jsx("img",{src:x,alt:t.title,className:`object-cover w-full h-full text-sm bg-white
                             `})}),e.jsx("div",{className:" w-full",children:e.jsx(P,{to:`/web/account/portfolio/${t.gid}`,children:e.jsxs("div",{className:`md:flex md:place-content-between 
                w-full md:gap-x-[4px]`,children:[e.jsxs("div",{className:"w-full md:w-[60%] -space-y-1 block",children:[e.jsx("div",{className:"font-bold text-[14px] text-brown-800 line-clamp-1",children:t.title}),e.jsx("div",{className:"font-normal text-[11.5px] flex place-items-center gap-1",children:e.jsx("div",{className:"capitalize flex place-items-center ",children:t.category})}),e.jsx("div",{className:`font-normal text-[11px] 
                                    flex place-items-center gap-1 `,children:t!=null&&t.active_status?"Active":"Inactive"})]}),e.jsxs("div",{className:`w-full lg:w-[40%] hidden 
                                sm:block`,children:[e.jsx("div",{className:"flex flex-col place-items-end place-content-end font-bold text-black tracking-tighter",children:t.phone}),e.jsxs("div",{className:`flex flex-col text-end text-[12px]
                                leading-[1.2em]`,children:[t==null?void 0:t.address_one,t!=null&&t.address_two?`, ${t==null?void 0:t.address_two}`:"",t!=null&&t.city_name?`, ${t==null?void 0:t.city_name}`:"",t!=null&&t.state_name?`, ${t==null?void 0:t.state_name}`:"",t!=null&&t.country_name?`, ${t==null?void 0:t.country_name}`:""]})]})]})})})]})})},R=({data:t,itemsPerPage:r=3,resetPageKey:c})=>{const[m,x]=g(),i=Number(m.get("page"))||1,[a,u]=l.useState(i),s=Math.ceil(t.length/r),b=a*r,w=b-r,h=t.slice(w,b),d=o=>{u(o);const p=new URLSearchParams(m);p.set("page",String(o)),x(p)},j=()=>{a>1&&d(a-1)},f=()=>{a<s&&d(a+1)};l.useEffect(()=>{c!==void 0&&d(1)},[c]);const N=()=>{if(s<=3)return Array.from({length:s},(n,y)=>y+1).map(n=>e.jsx("button",{onClick:()=>d(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));const o=[];a>2&&(o.push(e.jsx("button",{onClick:()=>d(1),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===1?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:"1"},1)),a>3&&o.push(e.jsx("span",{className:"px-2",children:"…"},"start-ellipsis")));const p=Math.max(1,a-1),v=Math.min(s,a+1);for(let n=p;n<=v;n++)o.push(e.jsx("button",{onClick:()=>d(n),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===n?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:n},n));return a<s-1&&(a<s-2&&o.push(e.jsx("span",{className:"px-2",children:"…"},"end-ellipsis")),o.push(e.jsx("button",{onClick:()=>d(s),className:`px-[12px] py-[6px] cursor-pointer border rounded-[4px] ${a===s?"bg-blue-500 text-white border-blue-500":"bg-white"}`,children:s},s))),o};return e.jsxs("div",{children:[e.jsx("div",{className:"divide-gray-500/20 divide-y-[1px]",children:h.map((o,p)=>e.jsx("div",{children:e.jsx(B,{index:p+1,listing:o})},p))}),s>1&&e.jsxs("div",{className:"flex justify-center gap-[5px] mt-[20px] text-[13px] border-t pt-6",children:[e.jsx("button",{onClick:j,disabled:a===1,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Previous"}),N(),e.jsx("button",{onClick:f,disabled:a===s,className:"px-[12px] py-[6px] bg-white cursor-pointer border rounded-[4px] disabled:opacity-50",children:"Next"})]})]})},U=({user:t,portfolio:r})=>e.jsx("div",{className:" h-fit pl-[5px] pr-[10px]",children:(r==null?void 0:r.length)>0?e.jsx(R,{data:r,itemsPerPage:7}):e.jsx("div",{className:`flex place-items-center rounded
                            place-content-center p-5 border capitalize`,children:e.jsx("span",{children:"no record"})})}),O=({query:t})=>e.jsx("form",{action:"/web/account/portfolio",className:"text-sm w-full max-w-md",children:e.jsxs("div",{className:`flex items-center bg-gray-50 rounded-full pl-4 pr-1 py-1 gap-2
            border-[1px] border-gray-500`,children:[e.jsx("input",{name:"q",defaultValue:t,type:"text",placeholder:"Business name, address, country, state...",className:"flex-grow text-gray-700 text-[12px] outline-none bg-transparent"}),e.jsx("button",{className:"bg-gray-600 w-8 h-8 flex items-center justify-center rounded-full text-white text-lg",children:e.jsx($,{})})]})}),z=({base_url:t,title:r,q:c})=>e.jsx("div",{children:e.jsxs("div",{className:`bg-gray-100 w-full  
                            flex place-content-between rounded-lg
                            place-items-center h-auto py-3 gap-[5px]
                            leading-[1.5em] px-[10px]`,children:[e.jsx("div",{className:"h-full min-w-[100px] w-[100px] max-w-[300px]",children:e.jsxs("div",{className:"flex items-center   ",children:[e.jsx(E,{className:"mr-1 flex-shrink-0",size:20}),e.jsx("span",{className:"line-clamp-1 overflow-hidden text-blue-800 text-[16px] font-sans tracking-tight font-bold",children:r})]})}),e.jsx("div",{className:"grow flex place-content-end",children:e.jsx(O,{query:c})})]})}),D=({children:t,businessGuid:r,data:c,businessProfile:m,title:x})=>e.jsx("div",{children:e.jsxs("div",{className:`mt-4 bg-white 
                rounded-lg shadow-md pb-8 `,children:[e.jsxs("div",{className:"font-semibold text-[17px] border-b-[1px] p-3 flex place-content-between place-items-center",children:[e.jsx("div",{children:x}),e.jsx("div",{className:"text-[13px] flex place-items-center gap-2",children:e.jsx("a",{href:"/web/account/portfolio",className:"border py-[5px] px-[10px] rounded-full bg-blue-50",children:"Portfolio Home"})})]}),e.jsxs("div",{className:"  pt-0 ",children:[e.jsx("div",{className:"w-full flex place-content-end"}),t,e.jsx("div",{className:"h-[40px]"})]})]})}),Z=()=>{l.useEffect(()=>{I(localStorage)},[]);const t=k();if(!t)return null;const{user:r}=t,[c,m]=l.useState(null),[x,i]=l.useState(null),[a,u]=l.useState(null),[s,b]=l.useState(!0),w=S(),h=new URLSearchParams(w.search),d=(h==null?void 0:h.get("q"))||"";return l.useEffect(()=>{async function j(f,N){const o=await C(f||""),p=await M(f||"",N||"");m(o),i(p)}try{r!=null&&r.guid&&j(r==null?void 0:r.guid,d)}catch(f){console.log(f.message)}},[r==null?void 0:r.guid,d]),l.useEffect(()=>{c&&x&&u({userProfile:c,portfolio:x})},[c,x]),l.useEffect(()=>{a!==null&&b(!1)},[a]),s?e.jsx(q,{loading:s}):e.jsx(_,{children:e.jsxs(D,{title:"My Portfolio",children:[c===null?"Loading...":"",e.jsx(z,{base_url:"/web/account/portfolio",title:`${A(a.portfolio.length)} Pages`,q:d}),e.jsx("div",{className:"flex place-items-center place-content-center mt-3"}),e.jsx("div",{className:"mt-[20px]"}),a!==null&&e.jsx(U,{user:a.userProfile,portfolio:a.portfolio})]})})};export{Z as default};
