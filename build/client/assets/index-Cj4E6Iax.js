import{j as e}from"./jsx-runtime-0DLF9kdB.js";import{u as P,a as E}from"./zod-CC5ug8f6.js";import{r as s,a as R,L as C}from"./components-DPfHZ1Ve.js";import{u as F}from"./OperationContext-DEJBADlp.js";import{u as I}from"./AuthContext-DKUMkAUy.js";import{o as d,s as u}from"./types-DBTFAyTi.js";import{a7 as c}from"./lib-B83UiCcG.js";import{u as T}from"./NotificationContext-BGyxjMcq.js";import{A}from"./AuthHeader-BHHSunR4.js";const L=d({username:u({message:"Please enter an email"}).min(1,{message:"Please enter an email"}).email({message:"Please enter a valid email"})});d({username:u({message:"Please enter your email or username"}).min(1,{message:"This field is required"}).email({message:"Please enter a valid email address"})});function O(){const[x,g]=s.useState(!1),[f,W]=s.useState(!1);s.useEffect(()=>{g(!0)},[]);const[B,q]=s.useState(null),a=I();if(!a)return null;const[o,r]=s.useState(!1);T();const h=R(),[z,p]=s.useState(!1),{showOperation:w,showError:b,completeOperation:l,showSuccess:y}=F(),j=async S=>{r(!0),w("processing"),await new Promise(n=>setTimeout(n,1e3));const k={email:S.username},i=await a.resetpw(k);JSON.stringify(i).includes("Error")?(r(!1),b("Error",c(i)),l()):(y("Success",c(i)),await new Promise(n=>setTimeout(n,1e3)),l(),r(!1),p(!0))},{register:v,handleSubmit:N,getValues:H,watch:J,setError:M,formState:{errors:t,isSubmitting:m}}=P({defaultValues:{},resolver:E(L)});return e.jsx("div",{className:"min-h-screen w-screen min-w-screen bg-black/50 flex items-center justify-center p-4",children:e.jsx("div",{className:`bg-white rounded-2xl shadow-xl overflow-hidden w-full max-w-sm transition-all duration-700 ease-in-out transform ${x?"translate-y-0 opacity-100":"translate-y-10 opacity-0"}`,children:e.jsxs("div",{className:"pb-8",children:[e.jsx("div",{className:"flex justify-center mb-6 mt-0 py-3 bg-gray-50 border-b",children:e.jsx("div",{className:"text-2xl font-[600] tracking-tighter font-poppins text-gray-700",children:"Reset Password"})}),e.jsxs("div",{className:"px-8",children:[f?e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"mb-6",children:e.jsx("svg",{className:"w-16 h-16 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Check Your Email"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We've sent password reset instructions to your email address. Please check your inbox and follow the instructions to reset your password."}),e.jsx("button",{onClick:()=>h("/web/signin"),className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Return to Sign In"})]}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Enter your email address and we'll send you instructions to reset your password."}),e.jsxs("form",{onSubmit:N(j),className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),e.jsx("input",{...v("username"),id:"username",type:"email",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors duration-300",placeholder:"your.email@example.com",autoComplete:"email"}),e.jsx("div",{className:"w-full mt-2 text-red-600 text-[11px] leading-[1.3em]",children:(t==null?void 0:t.username)&&e.jsx("div",{children:t.username.message})})]}),e.jsx("button",{type:"submit",disabled:m||o,className:"w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 px-6 rounded-lg transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:m||o?"Sending Instructions...":"Send Reset Instructions"})]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-600",children:["Remember your password?"," ",e.jsx(C,{to:"/web/signin",className:"font-medium text-indigo-600 hover:text-indigo-500 transition-colors duration-300",children:"Sign in"})]})})]})]})})})}const V=()=>e.jsxs("div",{className:`bg-white w-full 
        md:bg-[url('/images/drone.jpg')]
        bg-cover bg-center min-h-screen flex place-content-center `,children:[e.jsx(A,{}),e.jsx(O,{})]}),ee=()=>e.jsx("div",{children:e.jsx(V,{})});export{ee as default};
